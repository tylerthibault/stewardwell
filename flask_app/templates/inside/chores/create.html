{% extends "inside/dashboard.html" %}

{% block dashboard_content %}
{% include "inside/components/chores_subnav.html" %}

<div class="p-6">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold">Create New Chore</h2>
    </div>

    <div class="bg-white rounded-lg shadow p-6">
        <form action="{{ url_for('create_chore', family_id=family.id) }}" method="POST">
            <div class="space-y-6 max-w-3xl">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Chore Name</label>
                    <input type="text" name="name" required
                           class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                    <textarea name="description" rows="3"
                             class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500"></textarea>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Coin Value</label>
                        <input type="number" name="coin_value" min="0" required
                               class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Family Points</label>
                        <input type="number" name="family_points" min="0" required
                               class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                    <div class="flex flex-col sm:flex-row sm:space-x-4 space-y-4 sm:space-y-0">
                        <select name="category_id" 
                                class="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500"
                                onchange="toggleNewCategoryInput(this.value)">
                            <option value="">Select Category</option>
                            {% for category in categories %}
                            <option value="{{ category.id }}">{{ category.name }}</option>
                            {% endfor %}
                            <option value="new">+ Add New Category</option>
                        </select>
                    </div>
                    <div id="newCategoryInput" class="hidden mt-4">
                        <input type="text" name="new_category" placeholder="Enter new category name"
                               class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                    </div>
                </div>

                <div>
                    <div class="flex items-center mb-4">
                        <input type="checkbox" name="recurring" id="recurring"
                               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                               onchange="toggleRecurringOptions()">
                        <label for="recurring" class="ml-2 block text-sm text-gray-900">
                            Recurring Chore
                        </label>
                    </div>
                    <div id="recurringOptions" class="hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Frequency</label>
                        <select name="recurring_frequency" 
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>
                </div>

                <div class="flex justify-end space-x-4 pt-4">
                    <a href="{{ url_for('family_chores', family_id=family.id) }}"
                       class="px-4 py-2 border rounded-lg hover:bg-gray-50">
                        Cancel
                    </a>
                    <button type="submit"
                            class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                        Create Chore
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
function toggleNewCategoryInput(value) {
    const newCategoryInput = document.getElementById('newCategoryInput');
    newCategoryInput.style.display = value === 'new' ? 'block' : 'none';
}

function toggleRecurringOptions() {
    const recurringOptions = document.getElementById('recurringOptions');
    recurringOptions.style.display = document.getElementById('recurring').checked ? 'block' : 'none';
}
</script>
{% endblock %} 